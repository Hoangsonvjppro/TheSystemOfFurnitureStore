<!-- User Orders History Page -->
<div class="user-orders-page bg-gray-50 py-12">
    <div class="container mx-auto px-4">
        <!-- Breadcrumb -->
        <div class="mb-6">
            <div class="flex items-center text-sm text-gray-500">
                <a href="/" class="hover:text-primary-600">Trang chủ</a>
                <span class="mx-2">/</span>
                <a href="/account" class="hover:text-primary-600">Tài khoản</a>
                <span class="mx-2">/</span>
                <span class="text-gray-700">Đơn hàng của tôi</span>
            </div>
        </div>

        <!-- Account Navigation -->
        <div class="lg:grid lg:grid-cols-4 lg:gap-8">
            <!-- Sidebar Navigation -->
            <div class="lg:col-span-1 mb-8 lg:mb-0">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="font-medium text-lg mb-4 pb-2 border-b border-gray-200">Tài khoản của tôi</h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="/account" class="block py-2 px-3 text-gray-700 hover:bg-gray-100 hover:text-primary-600 rounded">
                                <i class="fas fa-user mr-2 w-5 text-center"></i>
                                Thông tin tài khoản
                            </a>
                        </li>
                        <li>
                            <a href="/account/orders" class="block py-2 px-3 bg-primary-50 text-primary-600 font-medium rounded">
                                <i class="fas fa-shopping-bag mr-2 w-5 text-center"></i>
                                Đơn hàng của tôi
                            </a>
                        </li>
                        <li>
                            <a href="/account/addresses" class="block py-2 px-3 text-gray-700 hover:bg-gray-100 hover:text-primary-600 rounded">
                                <i class="fas fa-map-marker-alt mr-2 w-5 text-center"></i>
                                Sổ địa chỉ
                            </a>
                        </li>
                        <li>
                            <a href="/account/wishlist" class="block py-2 px-3 text-gray-700 hover:bg-gray-100 hover:text-primary-600 rounded">
                                <i class="fas fa-heart mr-2 w-5 text-center"></i>
                                Sản phẩm yêu thích
                            </a>
                        </li>
                        <li>
                            <a href="/account/reviews" class="block py-2 px-3 text-gray-700 hover:bg-gray-100 hover:text-primary-600 rounded">
                                <i class="fas fa-star mr-2 w-5 text-center"></i>
                                Đánh giá của tôi
                            </a>
                        </li>
                        <li>
                            <a href="/logout" class="block py-2 px-3 text-gray-700 hover:bg-gray-100 hover:text-red-600 rounded">
                                <i class="fas fa-sign-out-alt mr-2 w-5 text-center"></i>
                                Đăng xuất
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Orders Content -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                    <!-- Header -->
                    <div class="border-b border-gray-200 px-6 py-4">
                        <h1 class="text-xl font-bold text-gray-900">Đơn hàng của tôi</h1>
                    </div>

                    <!-- Search & Filter -->
                    <div class="p-6 border-b border-gray-200 bg-gray-50">
                        <div class="flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4">
                            <!-- Search -->
                            <div class="flex-1 relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                                <input type="text" class="pl-10 w-full border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500" placeholder="Tìm kiếm đơn hàng theo mã...">
                            </div>

                            <!-- Status Filter -->
                            <div class="md:w-48">
                                <select class="w-full border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500">
                                    <option value="">Tất cả trạng thái</option>
                                    <option value="pending">Chờ xác nhận</option>
                                    <option value="processing">Đang xử lý</option>
                                    <option value="shipping">Đang giao hàng</option>
                                    <option value="completed">Đã hoàn thành</option>
                                    <option value="cancelled">Đã hủy</option>
                                </select>
                            </div>

                            <!-- Time Filter -->
                            <div class="md:w-56">
                                <select class="w-full border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500">
                                    <option value="">Tất cả thời gian</option>
                                    <option value="7days">7 ngày gần đây</option>
                                    <option value="30days">30 ngày gần đây</option>
                                    <option value="3months">3 tháng gần đây</option>
                                    <option value="6months">6 tháng gần đây</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Orders List -->
                    <div class="divide-y divide-gray-200">
                        <!-- Order Item 1 (Open) -->
                        <div class="order-item">
                            <!-- Order Summary -->
                            <div class="p-6 hover:bg-gray-50 cursor-pointer order-header active">
                                <div class="grid grid-cols-12 gap-4">
                                    <!-- Order ID & Date -->
                                    <div class="col-span-12 md:col-span-4">
                                        <div class="flex items-center">
                                            <div class="mr-3 text-primary-600">
                                                <i class="fas fa-chevron-down order-toggle"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-900">#ORD-2023100001</p>
                                                <p class="text-sm text-gray-500">Đặt ngày: 10/10/2023</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Order Status -->
                                    <div class="col-span-12 md:col-span-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            <span class="w-1.5 h-1.5 inline-block rounded-full bg-blue-500 mr-1"></span>
                                            Đang giao hàng
                                        </span>
                                        <p class="text-sm text-gray-500 mt-1">Dự kiến: 15/10/2023</p>
                                    </div>
                                    
                                    <!-- Order Items & Total -->
                                    <div class="col-span-12 md:col-span-3">
                                        <p class="text-sm text-gray-500">3 sản phẩm</p>
                                        <p class="font-medium text-gray-900">8.500.000 ₫</p>
                                    </div>
                                    
                                    <!-- Order Actions -->
                                    <div class="col-span-12 md:col-span-2 flex items-center justify-end">
                                        <button class="text-sm text-primary-600 hover:text-primary-800 font-medium">
                                            <i class="fas fa-receipt mr-1"></i> Hóa đơn
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Order Details (Expanded) -->
                            <div class="order-details bg-gray-50 p-6 border-t border-gray-200">
                                <!-- Stepper Timeline -->
                                <div class="mb-6 relative">
                                    <div class="absolute left-7 top-5 h-full w-0.5 bg-gray-200"></div>
                                    <!-- Stepper Items -->
                                    <div class="space-y-8">
                                        <!-- Step 1: Order Placed -->
                                        <div class="relative flex items-start">
                                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white z-10">
                                                <i class="fas fa-check text-white text-xs"></i>
                                            </div>
                                            <div class="ml-4 min-w-0 flex-1">
                                                <div class="text-sm font-medium text-gray-900">Đơn hàng đã đặt</div>
                                                <div class="text-sm text-gray-500">10/10/2023 - 09:15</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Step 2: Processing -->
                                        <div class="relative flex items-start">
                                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white z-10">
                                                <i class="fas fa-check text-white text-xs"></i>
                                            </div>
                                            <div class="ml-4 min-w-0 flex-1">
                                                <div class="text-sm font-medium text-gray-900">Đã xác nhận đơn hàng</div>
                                                <div class="text-sm text-gray-500">10/10/2023 - 14:22</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Step 3: Shipping -->
                                        <div class="relative flex items-start">
                                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white z-10 animate-pulse">
                                                <i class="fas fa-shipping-fast text-white text-xs"></i>
                                            </div>
                                            <div class="ml-4 min-w-0 flex-1">
                                                <div class="text-sm font-medium text-gray-900">Đang giao hàng</div>
                                                <div class="text-sm text-gray-500">12/10/2023 - 08:30</div>
                                                <div class="mt-1 text-sm text-blue-600">
                                                    Đơn hàng đang được giao đến địa chỉ của bạn
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Step 4: Delivered -->
                                        <div class="relative flex items-start">
                                            <div class="flex-shrink-0 h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center ring-8 ring-white z-10">
                                                <i class="fas fa-home text-gray-400 text-xs"></i>
                                            </div>
                                            <div class="ml-4 min-w-0 flex-1">
                                                <div class="text-sm font-medium text-gray-500">Giao hàng thành công</div>
                                                <div class="text-sm text-gray-500">Dự kiến: 15/10/2023</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Products -->
                                <h4 class="font-medium text-gray-900 mb-3">Sản phẩm (3)</h4>
                                <div class="space-y-4 mb-6">
                                    <!-- Product 1 -->
                                    <div class="flex items-center">
                                        <div class="h-16 w-16 flex-shrink-0 bg-gray-200 rounded overflow-hidden">
                                            <img src="https://via.placeholder.com/64" alt="Product" class="h-full w-full object-cover">
                                        </div>
                                        <div class="ml-4 flex-1">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="text-base font-medium text-gray-900">Ghế sofa đơn Scandinavian</h5>
                                                    <p class="text-sm text-gray-500">Màu: Xám nhạt / Số lượng: 1</p>
                                                </div>
                                                <div class="font-medium">3.200.000 ₫</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Product 2 -->
                                    <div class="flex items-center">
                                        <div class="h-16 w-16 flex-shrink-0 bg-gray-200 rounded overflow-hidden">
                                            <img src="https://via.placeholder.com/64" alt="Product" class="h-full w-full object-cover">
                                        </div>
                                        <div class="ml-4 flex-1">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="text-base font-medium text-gray-900">Bàn cà phê gỗ sồi</h5>
                                                    <p class="text-sm text-gray-500">Màu: Tự nhiên / Số lượng: 1</p>
                                                </div>
                                                <div class="font-medium">2.800.000 ₫</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Product 3 -->
                                    <div class="flex items-center">
                                        <div class="h-16 w-16 flex-shrink-0 bg-gray-200 rounded overflow-hidden">
                                            <img src="https://via.placeholder.com/64" alt="Product" class="h-full w-full object-cover">
                                        </div>
                                        <div class="ml-4 flex-1">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="text-base font-medium text-gray-900">Đèn sàn hiện đại</h5>
                                                    <p class="text-sm text-gray-500">Màu: Đen / Số lượng: 1</p>
                                                </div>
                                                <div class="font-medium">2.500.000 ₫</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Order Summary -->
                                <div class="bg-white p-4 rounded-lg border border-gray-200">
                                    <h4 class="font-medium text-gray-900 mb-3">Tổng quan đơn hàng</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600">Tổng tiền hàng:</span>
                                            <span>8.500.000 ₫</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600">Phí vận chuyển:</span>
                                            <span>Miễn phí</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600">Giảm giá:</span>
                                            <span>0 ₫</span>
                                        </div>
                                        <div class="border-t border-gray-200 my-2 pt-2 flex justify-between font-medium">
                                            <span>Tổng thanh toán:</span>
                                            <span class="text-primary-600">8.500.000 ₫</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Shipping Info -->
                                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Shipping Address -->
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">Địa chỉ giao hàng</h4>
                                        <div class="text-sm text-gray-600">
                                            <p class="font-medium">Nguyễn Văn A</p>
                                            <p>123 Đường Lê Lợi, Phường Bến Nghé</p>
                                            <p>Quận 1, TP. Hồ Chí Minh</p>
                                            <p>Số điện thoại: 0901234567</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Payment Info -->
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">Thông tin thanh toán</h4>
                                        <div class="text-sm text-gray-600">
                                            <p>Phương thức: <span class="font-medium">Thanh toán khi nhận hàng (COD)</span></p>
                                            <p>Trạng thái: <span class="font-medium text-orange-600">Chưa thanh toán</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Order Item 2 (Closed) -->
                        <div class="order-item">
                            <!-- Order Summary -->
                            <div class="p-6 hover:bg-gray-50 cursor-pointer order-header">
                                <div class="grid grid-cols-12 gap-4">
                                    <!-- Order ID & Date -->
                                    <div class="col-span-12 md:col-span-4">
                                        <div class="flex items-center">
                                            <div class="mr-3 text-gray-400">
                                                <i class="fas fa-chevron-right order-toggle"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-900">#ORD-2023090015</p>
                                                <p class="text-sm text-gray-500">Đặt ngày: 25/09/2023</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Order Status -->
                                    <div class="col-span-12 md:col-span-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            <span class="w-1.5 h-1.5 inline-block rounded-full bg-green-500 mr-1"></span>
                                            Đã hoàn thành
                                        </span>
                                        <p class="text-sm text-gray-500 mt-1">Ngày nhận: 30/09/2023</p>
                                    </div>
                                    
                                    <!-- Order Items & Total -->
                                    <div class="col-span-12 md:col-span-3">
                                        <p class="text-sm text-gray-500">2 sản phẩm</p>
                                        <p class="font-medium text-gray-900">4.750.000 ₫</p>
                                    </div>
                                    
                                    <!-- Order Actions -->
                                    <div class="col-span-12 md:col-span-2 flex items-center justify-end">
                                        <button class="text-sm text-primary-600 hover:text-primary-800 font-medium">
                                            <i class="fas fa-receipt mr-1"></i> Hóa đơn
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Order Details (Collapsed) -->
                            <div class="order-details bg-gray-50 p-6 border-t border-gray-200 hidden"></div>
                        </div>
                        
                        <!-- Order Item 3 (Closed) -->
                        <div class="order-item">
                            <!-- Order Summary -->
                            <div class="p-6 hover:bg-gray-50 cursor-pointer order-header">
                                <div class="grid grid-cols-12 gap-4">
                                    <!-- Order ID & Date -->
                                    <div class="col-span-12 md:col-span-4">
                                        <div class="flex items-center">
                                            <div class="mr-3 text-gray-400">
                                                <i class="fas fa-chevron-right order-toggle"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-900">#ORD-2023080042</p>
                                                <p class="text-sm text-gray-500">Đặt ngày: 15/08/2023</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Order Status -->
                                    <div class="col-span-12 md:col-span-3">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            <span class="w-1.5 h-1.5 inline-block rounded-full bg-red-500 mr-1"></span>
                                            Đã hủy
                                        </span>
                                        <p class="text-sm text-gray-500 mt-1">Ngày hủy: 16/08/2023</p>
                                    </div>
                                    
                                    <!-- Order Items & Total -->
                                    <div class="col-span-12 md:col-span-3">
                                        <p class="text-sm text-gray-500">1 sản phẩm</p>
                                        <p class="font-medium text-gray-900">5.900.000 ₫</p>
                                    </div>
                                    
                                    <!-- Order Actions -->
                                    <div class="col-span-12 md:col-span-2 flex items-center justify-end">
                                        <button class="text-sm text-gray-600 hover:text-gray-800 font-medium">
                                            <i class="fas fa-shopping-cart mr-1"></i> Mua lại
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Order Details (Collapsed) -->
                            <div class="order-details bg-gray-50 p-6 border-t border-gray-200 hidden"></div>
                        </div>
                    </div>
                    
                    <!-- Empty State (Hidden) -->
                    <div class="hidden p-12 text-center">
                        <div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6">
                            <i class="fas fa-shopping-bag text-gray-400 text-3xl"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">Bạn chưa có đơn hàng nào</h3>
                        <p class="text-gray-500 mb-6">Bạn có thể xem các sản phẩm của chúng tôi và đặt hàng ngay bây giờ.</p>
                        <a href="/products" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                            <i class="fas fa-shopping-cart mr-2"></i>
                            Mua sắm ngay
                        </a>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                            <div>
                                <p class="text-sm text-gray-700">
                                    Hiển thị <span class="font-medium">1</span> đến <span class="font-medium">3</span> của <span class="font-medium">3</span> đơn hàng
                                </p>
                            </div>
                            <div>
                                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                    <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">Previous</span>
                                        <i class="fas fa-chevron-left"></i>
                                    </a>
                                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-primary-50 text-sm font-medium text-primary-600 hover:bg-primary-100">
                                        1
                                    </a>
                                    <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        2
                                    </a>
                                    <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">Next</span>
                                        <i class="fas fa-chevron-right"></i>
                                    </a>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Orders JavaScript -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Order headers toggle functionality
        const orderHeaders = document.querySelectorAll('.order-header');
        
        orderHeaders.forEach(header => {
            header.addEventListener('click', function() {
                // Toggle active class on header
                this.classList.toggle('active');
                
                // Toggle icon direction
                const icon = this.querySelector('.order-toggle');
                if (icon.classList.contains('fa-chevron-right')) {
                    icon.classList.remove('fa-chevron-right');
                    icon.classList.add('fa-chevron-down');
                    icon.classList.remove('text-gray-400');
                    icon.classList.add('text-primary-600');
                } else {
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-right');
                    icon.classList.remove('text-primary-600');
                    icon.classList.add('text-gray-400');
                }
                
                // Toggle details visibility
                const details = this.nextElementSibling;
                if (details.classList.contains('hidden')) {
                    // Load order details content here from API or show pre-loaded content
                    details.classList.remove('hidden');
                } else {
                    details.classList.add('hidden');
                }
            });
        });
        
        // Fetch Orders
        function fetchOrders(filters = {}) {
            // In a real implementation, this would call an API
            // For now, we'll use the mock data already in the HTML
            console.log('Fetching orders with filters:', filters);
            
            // Example of API call (commented out)
            /*
            fetch('/api/orders', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(filters)
            })
            .then(response => response.json())
            .then(data => {
                // Render orders based on data
                renderOrders(data.orders);
            })
            .catch(error => {
                console.error('Error fetching orders:', error);
            });
            */
        }
        
        // Initial fetch
        fetchOrders();
        
        // Filter change event handlers
        const statusFilter = document.querySelector('select:nth-of-type(1)');
        const timeFilter = document.querySelector('select:nth-of-type(2)');
        const searchInput = document.querySelector('input[type="text"]');
        
        if (statusFilter) {
            statusFilter.addEventListener('change', function() {
                applyFilters();
            });
        }
        
        if (timeFilter) {
            timeFilter.addEventListener('change', function() {
                applyFilters();
            });
        }
        
        if (searchInput) {
            // Debounce search input
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    applyFilters();
                }, 500);
            });
        }
        
        function applyFilters() {
            const filters = {
                status: statusFilter ? statusFilter.value : '',
                time: timeFilter ? timeFilter.value : '',
                search: searchInput ? searchInput.value : ''
            };
            
            fetchOrders(filters);
        }
    });
</script>
